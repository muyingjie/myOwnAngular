<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>High Level DI</title>
    <script src="jquery-2.2.0.js"></script>
    <script src="lodash.js"></script>
    <script src="myAngular.js"></script>
    <script>
        publishExternalAPI();
        console.log("Injecting the $injectors");
        console.log("allows injecting the instance injector to $get");
        (function () {
            //var module = angular.module("myModule", []);
            //module.constant("a", 42);
            //module.provider("b", function BProvider() {
            //    this.$get = function ($injector) {
            //        return $injector.get("a");
            //    }
            //});
            //var injector = createInjector(["myModule"]);
            //console.log(injector.get("b"));
        })();
        console.log("allows injecting the provider injector to provider");
        (function () {
            //var module = angular.module("myModule", []);
            //module.provider("a", function AProvider() {
            //    this.value = 42;
            //    this.$get = function () { return this.value; };
            //});
            //module.provider("b", function BProvider($injector) {
            //    var aProvider = $injector.get("aProvider");
            //    this.$get = function () {
            //        return aProvider.value;
            //    };
            //});
            //var injector = createInjector(["myModule"]);
            //console.log(injector.get("b"));
        })();
        console.log("Injecting $provide");
        console.log("allows injecting the $provide service to providers");
        (function () {
            //var module = angular.module("myModule", []);
            //module.provider("a", function AProvider($provide) {
            //    $provide.constant("b", 2);
            //    this.$get = function (b) { return 1 + b; };
            //});
            //var injector = createInjector(["myModule"]);
            //console.log(injector.get("a"));
        })();
        console.log("doesn't allow injecting the $provide service to $get");
        (function () {
            //var module = angular.module("myModule", []);
            //module.provider("a", function AProvider() {
            //    this.$get = function ($provide) { };
            //});
            //var injector = createInjector(["myModule"]);
            //console.log(injector.get("a"));
        })();
        console.log("runs config blocks when the injector is created");
        (function () {
            //var module = angular.module("myModule", []);
            //var hasRun = false;
            //module.config(function () {
            //    hasRun = true;
            //});
            //createInjector(["myModule"]);
            //console.log(hasRun);
        })();
        console.log("injects config blocks with provider injector");
        (function () {
            //var module = angular.module("myModule", []);
            //module.config(function ($provide) {
            //    $provide.constant("a", 42);
            //});
            //var injector = createInjector(["myModule"]);
            //console.log(injector.get("a"));
        })();
        console.log("allows registering config blocks before providers");
        (function () {
            //var module = angular.module("myModule", []);
            //module.config(function (aProvider) { });
            //module.provider("a", function () {
            //    this.$get = _.constant(42);
            //});
            //var injector = createInjector(["myModule"]);
            //console.log(injector.get("a"));
        })();
        console.log("runs a config block added during module registration");
        (function () {
            //var module = angular.module("myModule", [], function ($provide) {
            //    $provide.constant("a", 42);
            //});
            //var injector = createInjector(["myModule"]);
            //console.log(injector.get("a"));
        })();
        console.log("Run Blocks");
        console.log("runs run blocks when the injector is created");
        (function () {
            //var module = angular.module("myModule", []);
            //var hasRun = false;
            //module.run(function () {
            //    hasRun = true;
            //});
            //createInjector(["myModule"]);
            //console.log(hasRun);
        })();
        console.log("injects run blocks with the instance injector");
        (function () {
            //var module = angular.module("myModule", []);
            //module.provider("a", { $get: _.constant(42) });
            //var gotA;
            //module.run(function (a) {
            //    gotA = a;
            //});
            //createInjector(["myModule"]);
            //console.log(gotA);
        })();
        console.log("configures all modules before running any run blocks");
        (function () {
            //var module1 = angular.module("myModule", []);
            //module1.provider("a", { $get: _.constant(1) });
            //var result;
            //module1.run(function (a, b) {
            //    result = a + b;
            //});
            //var module2 = angular.module("myOtherModule", []);
            //module2.provider("b", { $get: _.constant(2) });
            //createInjector(["myModule", "myOtherModule"]);
            //console.log(result);
        })();
        console.log("Function Modules");
        console.log("runs a function module dependency as a config block");
        (function () {
            //var functionModule = function ($provide) {
            //    $provide.constant("a", 42);
            //};
            //angular.module("myModule", [functionModule]);
            //var injector = createInjector(["myModule"]);
            //console.log(injector.get("a"));
        })();
        console.log("runs a function module with array injection as a config block");
        (function () {
            //var functionModule = ["$provide", function ($provide) {
            //    $provide.constant("a", 42);
            //}];
            //angular.module("myModule", [functionModule]);
            //var injector = createInjector(["myModule"]);
            //console.log(injector.get("a"));
        })();
        console.log("supports returning a run block from a function module");
        (function () {
            //var result;
            //var functionModule = function ($provide) {
            //    $provide.constant("a", 42);
            //    return function (a) {
            //        result = a;
            //    };
            //};
            //angular.module("myModule", [functionModule]);
            //createInjector(["myModule"]);
            //console.log(result);
        })();
        console.log("only loads function modules once");
        (function () {
            //var loadedTimes = 0;
            //var functionModule = function () {
            //    loadedTimes++;
            //};
            //angular.module("myModule", [functionModule, functionModule]);
            //createInjector(["myModule"]);
            //console.log(loadedTimes);
        })();
    </script>
</head>
<body>
</body>
</html>
